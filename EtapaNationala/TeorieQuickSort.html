<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimAlgo Learning - Teorie Quick Sort</title>
    <link rel="stylesheet" href="TeorieQuickSort.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="navbar">
        <div class="navbar-content">
            <div class="logo">
                <img src="logo.png" alt="SimAlgo Learning Logo" class="logo-img">
                SimAlgo Learning
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="home.html">HOME</a></li>
                    <li><a href="Algoritmi.html">Algoritmi</a></li>
                    <li><a href="Despre.html">Despre noi</a></li>
                </ul>
                
            </nav>
            <button class="nav-toggle" aria-label="toggle navigation">
                <span class="hamburger"></span>
            </button>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="content-column">
                <h1>Quick Sort</h1>
                <div id="teorie" class="content-section">
                    <h2>Teorie</h2>
                    <p>Quick Sort este un algoritm de sortare eficient care folosește tehnica divide et impera. Algoritmul alege un pivot și particionează lista în subliste, astfel încât elementele mai mici decât pivotul sunt la stânga acestuia, iar cele mai mari sunt la dreapta.</p>
                    <pre><code class="code-block">
void QuickSort(int v[], int st, int dr)
{
    if (st < dr)
    {
        int m = (st + dr) / 2;
        int aux = v[st];
        v[st] = v[m];
        v[m] = aux;
        int i = st, j = dr, d = 0;
        while (i < j)
        {
            if (v[i] > v[j])
            {
                aux = v[i];
                v[i] = v[j];
                v[j] = aux;
                d = 1 - d;
            }
            i += d;
            j -= 1 - d;
        }
        QuickSort(v, st, i - 1);
        QuickSort(v, i + 1, dr);
    }
}
                    </code></pre>
                </div>
            </div>
            <div class="visualization-column">
                <div id="visualization">
                    <div class="controls">
                        <button onclick="shuffleArray()" class="button">Shuffle</button>
                        <button onclick="startSort()" class="button">Start</button>
                        <button onclick="pauseSort()" class="button">Pause</button>
                    </div>
                    <div id="bars"></div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p class="footer-left">&copy; 2024 SimAlgo Learning</p>
            <p class="footer-center">Made with <span class="heart">❤</span></p>
            <p class="footer-right" id="current-time"></p>
        </div>
    </footer>

    <script>
        let array = [];
        let isPaused = false;
        let currentTask = null;

        function createBars() {
            const barsContainer = document.getElementById('bars');
            barsContainer.innerHTML = '';
            array.forEach((value, index) => {
                const barContainer = document.createElement('div');
                barContainer.classList.add('bar-container');

                const bar = document.createElement('div');
                bar.style.height = `${value}px`;
                bar.classList.add('bar');

                const valueLabel = document.createElement('span');
                valueLabel.textContent = value;
                valueLabel.classList.add('value-label');

                const indexLabel = document.createElement('div');
                indexLabel.textContent = `[${index}]`;
                indexLabel.classList.add('index-label');

                barContainer.appendChild(bar);
                bar.appendChild(valueLabel);
                barContainer.appendChild(indexLabel);
                barsContainer.appendChild(barContainer);
            });
        }

        function shuffleArray() {
            array = Array.from({ length: 15 }, () => Math.floor(Math.random() * 150) + 50);
            createBars();
        }

        async function quickSort(arr, left, right) {
            if (left < right) {
                const pivotIndex = await partition(arr, left, right);
                await Promise.all([
                    quickSort(arr, left, pivotIndex - 1),
                    quickSort(arr, pivotIndex + 1, right)
                ]);
            }
        }

        async function partition(arr, left, right) {
            const pivotValue = arr[right];
            let pivotIndex = left;
            for (let i = left; i < right; i++) {
                if (arr[i] < pivotValue) {
                    await swap(arr, i, pivotIndex);
                    pivotIndex++;
                }
            }
            await swap(arr, pivotIndex, right);
            return pivotIndex;
        }

        async function swap(arr, i, j) {
            const bars = document.querySelectorAll('.bar');
            bars[i].style.backgroundColor = 'red';
            bars[j].style.backgroundColor = 'red';

            await new Promise(resolve => setTimeout(resolve, 300));

            let temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
            bars[i].style.height = `${arr[i]}px`;
            bars[j].style.height = `${arr[j]}px`;
            bars[i].querySelector('.value-label').textContent = arr[i];
            bars[j].querySelector('.value-label').textContent = arr[j];

            bars[i].style.backgroundColor = 'turquoise';
            bars[j].style.backgroundColor = 'turquoise';
        }

        async function startSort() {
            isPaused = false;
            if (!currentTask) {
                currentTask = quickSort(array, 0, array.length - 1);
                await currentTask;
                currentTask = null;
            }
        }

        function pauseSort() {
            isPaused = true;
        }

        shuffleArray(); // Initial shuffle on page load

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            document.getElementById('current-time').textContent = timeString;
        }
        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>
