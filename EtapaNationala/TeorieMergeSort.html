<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimAlgo Learning - Teorie Merge Sort</title>
    <link rel="stylesheet" href="TeorieMergeSort.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="navbar">
        <div class="navbar-content">
            <div class="logo">
                <img src="logo.png" alt="SimAlgo Learning Logo" class="logo-img">
                SimAlgo Learning
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="home.html">HOME</a></li>
                    <li><a href="Algoritmi.html">Algoritmi</a></li>
                    <li><a href="Despre.html">Despre noi</a></li>
                </ul>
                
            </nav>
            <button class="nav-toggle" aria-label="toggle navigation">
                <span class="hamburger"></span>
            </button>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="content-column">
                <h1>Merge Sort</h1>
                <div id="teorie" class="content-section">
                    <h2>Teorie</h2>
                    <p>Merge Sort este un algoritm de sortare care utilizează metoda divide et impera. Algoritmul împarte lista în jumătăți mai mici până când fiecare sublistă are un singur element, după care sublistele sunt combinate pentru a forma lista sortată.</p>
                    <pre><code class="code-block">
void MergeSort(int st, int dr)
{
    if(st < dr)
    {
        int m = (st + dr) / 2;
        MergeSort(st , m);
        MergeSort(m + 1 , dr);

        int i = st, j = m + 1, k = 0;
        while( i <= m && j <= dr )
            if( v[i] < v[j])
                tmp[++k] = v[i++];
            else
                tmp[++k] = v[j++];
        while(i <= m)
            tmp[++k] = v[i++];
        while(j <= dr)
            tmp[++k] = v[j++];
        for(i = st , j = 1 ; i <= dr ; i ++ , j ++)
    }
}
                    </code></pre>
                </div>
            </div>
            <div class="visualization-column">
                <div id="visualization">
                    <div class="controls">
                        <button onclick="shuffleArray()" class="button">Shuffle</button>
                        <button onclick="startSort()" class="button">Start</button>
                        <button onclick="pauseSort()" class="button">Pause</button>
                    </div>
                    <div id="bars"></div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p class="footer-left">&copy; 2024 SimAlgo Learning</p>
            <p class="footer-center">Made with <span class="heart">❤</span></p>
            <p class="footer-right" id="current-time"></p>
        </div>
    </footer>

    <script>
        let array = [];
        let isPaused = false;

        function createBars() {
            const barsContainer = document.getElementById('bars');
            barsContainer.innerHTML = '';
            array.forEach((value, index) => {
                const barContainer = document.createElement('div');
                barContainer.classList.add('bar-container');

                const bar = document.createElement('div');
                bar.style.height = `${value}px`;
                bar.classList.add('bar');

                const valueLabel = document.createElement('span');
                valueLabel.textContent = value;
                valueLabel.classList.add('value-label');

                const indexLabel = document.createElement('div');
                indexLabel.textContent = `[${index}]`;
                indexLabel.classList.add('index-label');

                barContainer.appendChild(bar);
                bar.appendChild(valueLabel);
                barContainer.appendChild(indexLabel);
                barsContainer.appendChild(barContainer);
            });
        }

        function shuffleArray() {
            array = Array.from({ length: 15 }, () => Math.floor(Math.random() * 150) + 50);
            createBars();
        }

        async function mergeSort(arr, l, r) {
            if (l >= r) {
                return;
            }
            const m = Math.floor((l + r) / 2);
            await mergeSort(arr, l, m);
            await mergeSort(arr, m + 1, r);
            await merge(arr, l, m, r);
        }

        async function merge(arr, l, m, r) {
            const n1 = m - l + 1;
            const n2 = r - m;
            const L = new Array(n1);
            const R = new Array(n2);
            for (let i = 0; i < n1; i++) L[i] = arr[l + i];
            for (let i = 0; i < n2; i++) R[i] = arr[m + 1 + i];

            let i = 0, j = 0, k = l;
            while (i < n1 && j < n2) {
                const bars = document.querySelectorAll('.bar');
                bars[k].style.backgroundColor = 'red';

                if (L[i] <= R[j]) {
                    arr[k] = L[i];
                    i++;
                } else {
                    arr[k] = R[j];
                    j++;
                }
                bars[k].style.height = `${arr[k]}px`;
                bars[k].querySelector('.value-label').textContent = arr[k];
                await new Promise(resolve => setTimeout(resolve, 300)); // Slow down the sorting
                bars[k].style.backgroundColor = 'turquoise';
                k++;
            }

            while (i < n1) {
                const bars = document.querySelectorAll('.bar');
                bars[k].style.backgroundColor = 'red';

                arr[k] = L[i];
                bars[k].style.height = `${arr[k]}px`;
                bars[k].querySelector('.value-label').textContent = arr[k];
                await new Promise(resolve => setTimeout(resolve, 300)); // Slow down the sorting
                bars[k].style.backgroundColor = 'turquoise';
                i++;
                k++;
            }

            while (j < n2) {
                const bars = document.querySelectorAll('.bar');
                bars[k].style.backgroundColor = 'red';

                arr[k] = R[j];
                bars[k].style.height = `${arr[k]}px`;
                bars[k].querySelector('.value-label').textContent = arr[k];
                await new Promise(resolve => setTimeout(resolve, 300)); // Slow down the sorting
                bars[k].style.backgroundColor = 'turquoise';
                j++;
                k++;
            }
            createBars();
        }

        function startSort() {
            isPaused = false;
            mergeSort(array, 0, array.length - 1);
        }

        function pauseSort() {
            isPaused = true;
        }

        shuffleArray(); // Initial shuffle on page load

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            document.getElementById('current-time').textContent = timeString;
        }
        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>
